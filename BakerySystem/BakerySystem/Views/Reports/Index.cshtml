
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .errorClass {
        border: 1px solid red;
    }
    </style>
<h2>Reports</h2>
<div>
    <div id="controls">
        <label>Please Select Report Type</label> <br>
        <select id="rpttype" name="nm_rpttype">
            <option value="0" selected>Report Type</option>
            <option value="1">Admin login Details</option>
            <option value="2">Order Details</option>
            <option value="3">Delivery Details</option>
            <option value="4">Item Details</option>
        </select><br>
        <label>Date From</label> <br>
        <input type="text" id="dtfrom" class="datepicker" name="nm_dtfrom">
        <label>Date To</label> <br>
        <input type="text" id="dtTo" class="datepicker" name="nm_dtTo">

        <input type="button" id="search" value="Search" onclick="Search()">
        <br>
    </div>
    <div id="ReportDiv">
        <table id="ReportTable" class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th>Order No#</th>
                    <th>Order on</th>
                    <th>Person Name</th>
                    <th>Email</th>
                    <th>Address</th>
                    <th>Delivered</th>
                    <th>View Details</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

<div id="DeliveryDetails">


</div>
<script>
    $(function () { // will trigger when the document is ready
        $('.datepicker').datepicker(); //Initialise any date pickers
    });
    var Popup, dataTable;
    function Search() {
        if ($('#rpttype').val() == 0) {
            
            $('#rpttype').addClass('errorClass');
            setTimeout(function () {
                $('#rpttype').removeClass('errorClass');                
            }, 1000);
            return;
        }
        $('#ReportDiv').hide();
        $('#ReportDiv').empty();
        $('#ReportDiv').append('<table id="deliveryTable" class="table table-striped table-bordered" style="width:100%"><thead><tr><th>Order No#</th><th>Order on</th><th>Person Name</th><th>Email</th><th>Address</th><th>Delivered</th><th>View Details</th></tr></thead></table >');
        dataTable = $("#ReportTable").DataTable({
            "ajax": {
                "url": "/Reports/GetReport",               
                "type": "Get",
                "datatype": "json"
            },
            "columns": [
                { "data": "OrderId" },
                { "data": "Orderon" },
                { "data": "personname" },
                { "data": "email" },
                { "data": "address" },
                { "data": "Delivered" },
                { "data": "OrderId", render: function (data) { return "<a class='btn btn-info btn-sm' style='margin-left:5px' onclick=showOrderDetails(" + data + ")><i class='fa fa-cart-plus'></i> View Details</a>"; } }

            ],
            "language": {

                "emptyTable": "No data found"
            }
        });
        $(".dataTables_filter").hide();
        $(".dataTables_info").hide();
        $(".dataTables_length").hide();
        $('.dataTables_paginate paging_simple_numbers').hide();
        $('#ReportDiv').show();

    }
</script>

