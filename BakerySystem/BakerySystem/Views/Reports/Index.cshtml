
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

<script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
<style>
    .errorClass {
        border: 1px solid red;
    }
</style>
<h2>Reports</h2>

    <div>
        <div id="controls">
            <label>Please Select Report Type</label> <br>
            <select id="rpttype" name="nm_rpttype">
                <option value="0" selected>Report Type</option>
                <option value="1">Admin login Details</option>
                <option value="2">Order Details</option>
                <option value="3">Delivery Details</option>
                <option value="4">Item Details</option>
            </select><br>
            <label>Date From</label> <br>
            <input type="text" id="dtfrom" class="datepicker" name="nm_dtfrom">
            <label>Date To</label> <br>
            <input type="text" id="dtTo" class="datepicker" name="nm_dtTo">

            <input type="button" id="search" value="Search" onclick="Search()">
            <br>
        </div>
        <div id="ReportDiv">
            <table id="ReportTable" class="table table-striped table-bordered" style="width:100%">                
            </table>
        </div>
    </div>

    <div id="DeliveryDetails">


    </div>
    <script>
        $(function () { // will trigger when the document is ready
            $('.datepicker').datepicker(); //Initialise any date pickers
        });
        var Popup, dataTable;
        function Search() {
            var html = '';
            if ($('#rpttype').val() == 0) {

                $('#rpttype').addClass('errorClass');
                setTimeout(function () {
                    $('#rpttype').removeClass('errorClass');
                }, 1000);
                return;
            } else if ($('#rpttype').val() == 1) {
                $('#ReportDiv').hide();
                $('#ReportDiv').empty();
                html = '<table id="ReportTable" class="table table-striped table-bordered" style="width:100%"><thead><tr><th>Id</th><th>User Name</th><th>MachineIP</th><th>OperatingSystem</th><th>LoginTime</th></tr></thead></table >'
                $('#ReportDiv').append(html);
                dataTable = $("#ReportTable").DataTable({
                    "ajax": {
                        "url": "/Reports/GetReport",
                        "type": "Get",
                        "data": function (d) {
                            d.nm_rpttype = $('#rpttype').val();
                            d.nm_dtfrom = $('#dtfrom').val();
                            d.nm_dtTo = $('#dtTo').val();
                            // etc
                        },
                        "datatype": "json"
                    },
                    "columns": [
                        { "data": "Id" },
                        { "data": "UserName" },                       
                        { "data": "MachineIP" },
                        { "data": "OperatingSystem" },
                        { "data": "LoginTime" }                       
                    ],
                    "language": {

                        "emptyTable": "No data found"
                    }
                });
            } else if ($('#rpttype').val() == 2) {
                $('#ReportDiv').hide();
                $('#ReportDiv').empty();
                html = '<table id="ReportTable" class="table table-striped table-bordered" style="width:100%"><thead><tr><th>Id</th><th>User Name</th><th>MachineIP</th><th>OperatingSystem</th><th>LoginTime</th></tr></thead></table >'
                $('#ReportDiv').append(html);
                dataTable = $("#ReportTable").DataTable({
                    "ajax": {
                        "url": "/Reports/GetReport",
                        "type": "Get",
                        "data": function (d) {
                            d.nm_rpttype = $('#rpttype').val();
                            d.nm_dtfrom = $('#dtfrom').val();
                            d.nm_dtTo = $('#dtTo').val();
                            // etc
                        },
                        "datatype": "json"
                    },
                    "columns": [
                        { "data": "Id" },
                        { "data": "UserName" },
                        { "data": "MachineIP" },
                        { "data": "OperatingSystem" },
                        { "data": "LoginTime" }
                    ],
                    "language": {

                        "emptyTable": "No data found"
                    }
                });
            } else if ($('#rpttype').val() == 3) {
                $('#ReportDiv').hide();
                $('#ReportDiv').empty();
                html = '<table id="ReportTable" class="table table-striped table-bordered" style="width:100%"><thead><tr><th>Id</th><th>User Name</th><th>MachineIP</th><th>OperatingSystem</th><th>LoginTime</th></tr></thead></table >'
                $('#ReportDiv').append(html);
                dataTable = $("#ReportTable").DataTable({
                    "ajax": {
                        "url": "/Reports/GetReport",
                        "type": "Get",
                        "data": function (d) {
                            d.nm_rpttype = $('#rpttype').val();
                            d.nm_dtfrom = $('#dtfrom').val();
                            d.nm_dtTo = $('#dtTo').val();
                            // etc
                        },
                        "datatype": "json"
                    },
                    "columns": [
                        { "data": "Id" },
                        { "data": "UserName" },
                        { "data": "MachineIP" },
                        { "data": "OperatingSystem" },
                        { "data": "LoginTime" }
                    ],
                    "language": {

                        "emptyTable": "No data found"
                    }
                });
            } else if ($('#rpttype').val() == 4) {
                $('#ReportDiv').hide();
                $('#ReportDiv').empty();
                html = '<table id="ReportTable" class="table table-striped table-bordered" style="width:100%"><thead><tr><th>Id</th><th>User Name</th><th>MachineIP</th><th>OperatingSystem</th><th>LoginTime</th></tr></thead></table >'
                $('#ReportDiv').append(html);
                dataTable = $("#ReportTable").DataTable({
                    "ajax": {
                        "url": "/Reports/GetReport",
                        "type": "Get",
                        "data": function (d) {
                            d.nm_rpttype = $('#rpttype').val();
                            d.nm_dtfrom = $('#dtfrom').val();
                            d.nm_dtTo = $('#dtTo').val();
                            // etc
                        },
                        "datatype": "json"
                    },
                    "columns": [
                        { "data": "Id" },
                        { "data": "UserName" },
                        { "data": "MachineIP" },
                        { "data": "OperatingSystem" },
                        { "data": "LoginTime" }
                    ],
                    "language": {

                        "emptyTable": "No data found"
                    }
                });
            }
            
            $(".dataTables_filter").hide();
            $(".dataTables_info").hide();
            $(".dataTables_length").hide();
            $('.dataTables_paginate paging_simple_numbers').hide();
            $('#ReportDiv').show();

        }
    </script>

